<?xml version="1.0" encoding="UTF-8"?>
	<chapter xmlns="http://docbook.org/ns/docbook"  
	xmlns:xml="http://www.w3.org/XML/1998/namespace" 
	xmlns:xl="http://www.w3.org/1999/xlink" 
	xml:lang="ja">

		<title>TMの5つの文法 3.関係の文法</title>
		<para>エンティティを作って、エンティティを2種類に分類した後は、エンティティ間の関係を定義していきます。</para>
		<para>TMでは、エンティティ間の関係を４つの関係文法のルールに従って生成します。</para>
		<orderedlist>
			<title>４つの関係文法</title>
			<listitem>
				<para>リソースとリソース間</para>
				<para>対照表を作成します。対照表はリソース間の組合せを表す表（エンティティではないので注意）です。</para>
				<para>リソースの組であるため、TMの関係文法では対照表はリソースと同じ扱いをします。</para>
				<para>しかし、対照表の右側に日付（過去日）を付けた時に意味があれば、意味論上イベントとみなすことができます。</para>
			</listitem>
			<listitem>
				<para>リソースとイベント間</para>
				<para>リソースの個体指定子をイベントの左側へコピーします。「リソースがイベントに関与する。」というそうです。見慣れたER図の依存リレーションシップと似ています。</para>
			</listitem>
			<listitem>
				<para>イベントとイベント間</para>
				<para>イベントの発生する時系列で早い方をfrom、遅い方をtoとした場合、先にマウスで選択した方がfromとなります。</para>
				<para>fromとtoが1:1または1:Nの場合は、個体指定子をイベントの左側へコピーします。</para>
				<para>fromとtoがN:1の場合は、対応表を作成します。対応表はイベント間の対応を表す表（エンティティではありません）。対応表は、他のエンティティや表と関係を持てません。</para></listitem>
			<listitem>
				<para>同一エンティティ間</para>
				<para>再帰表を作成します。</para>
				<para>TMの関係文法では、リソースの再帰表はリソース、イベントの再帰表はイベントと同じ扱いをします。</para>
			</listitem>
		</orderedlist>
		<para>ちなみに(R)は Referenceではなく、Re-usedと呼んでいます。</para>

		<para>TMD-Makerも、以下の文法に従ってリレーションを自動生成します。</para>

		<orderedlist>
			<title>リレーション生成方法</title>
			<listitem>
				<para>リレーションツールを選択する</para>
			</listitem>
			<listitem>
				<para>エンティティ（表）をクリックする</para>
				<para>先にクリックした方がfromとなります。</para>
			</listitem>
			<listitem>
				<para>エンティティ（表）をクリックする</para>
				<para>後にクリックした方がtoとなります。</para>
				<para>fromとtoで上記文法に従ったリレーションが生成されます。</para>
			</listitem>
		</orderedlist>
		<!-- 
				<table border="1">
			<caption>４つの関係文法のパターン表</caption>
			<tbody>
				<tr><td></td><td colspan="2">to</td></tr>
				<tr><td>from</td><td>リソース</td><td>イベント</td></tr>
				<tr><td>リソース</td><td>1</td><td>2</td></tr>
				<tr><td>イベント</td><td>2</td><td>3</td></tr>
			</tbody>
		</table>
		<para>4.fromとtoが同一エンティティ</para>
		
		<para>ちなみにエンティティの種類の変更は、この後説明する関係の文法でリレーションシップを持つと変更できなくなります。</para>
		 -->
		
	</chapter>
